# üß† Project Snapshot ‚Äî Greko VRM Engine v3.0
---
> **TL;DR:** Transitioned to a "Thin-Client" architecture. Python handles the heavy lifting of GLB parsing, while a custom C++ Bridge (`pybind11`) feeds raw buffers directly to OpenGL 4.3. This bypasses the Assimp "black box" that was stripping facial data in V2.2.

---

## üèóÔ∏è The "Muscle" Architecture
We have moved away from monolithic engines to a custom-built, high-speed pipeline.

* **The Brain (Python):** Orchestrates the GLB/VRM parsing. It extracts the raw binary data into NumPy arrays.
* **The Nerve (Pybind11):** A high-speed bridge that passes memory pointers from Python to C++ with zero-copy overhead.
* **The Muscle (C++/OpenGL):** Manages the GPU lifecycle, shader compilation, and the real-time render loop.



---

## üöÄ Key Technical Milestones

### 1. Direct Buffer Control (The Assimp Killer)
In V2.2, Assimp was pruning bones and morphs it deemed "unnecessary" due to zero-weight vertex data. In V3.0, we use a **manual uploader**:
* **`upload_mesh_to_gpu()`**: Directly maps Python buffers to `GL_ARRAY_BUFFER` and `GL_ELEMENT_ARRAY_BUFFER`.
* **Precision Layout:** Manually defined Vertex Attribute Pointers for Positions, UVs, Joints, and Weights.
* **Memory Safety:** Uses raw pointer access from NumPy data to ensure sub-millisecond data transfer to the GPU.

### 2. Custom Fly-Camera System
We implemented a professional-grade 3D camera from scratch to replace the limited Panda3D view:
* **Perspective Matrix:** Fixed the "Squashed" look by implementing a proper Frustum with $Near = 0.01$ (for close-up facial inspection) and $Far = 1000.0$.
* **Mouse Look:** Implemented Euler Angles (Yaw/Pitch) with gimbal lock protection ($89.0^{\circ}$ limit).
* **Frame Independence:** All movement is scaled by `dt` (Delta Time), ensuring Kisayo moves at the same speed whether the engine is hitting 60 FPS or 500 FPS.



### 3. Real-Time Performance HUD
* **Terminal-Based Dashboard:** Uses the Carriage Return (`\r`) escape sequence to provide a non-scrolling, live-updating status bar.
* **Telemetry:** Tracks FPS, Frame Time (ms), and world-space Camera Coordinates.

---

## üß™ Current Engine State: "The Pink Phase"
* **Geometry:** 100% correct. Perspective and depth-testing (`GL_DEPTH_TEST`) are verified.
* **Shading:** Currently using a `debug.frag` shader that outputs solid Magenta/Pink. 
* **Perspective:** Verified. The model no longer disappears when getting close, and depth sorting ensures the face renders in front of the hair.



---

## üõ†Ô∏è Build Specs & Tools
* **Compiler:** `g++` via `run.sh` JIT-style compilation.
* **Math:** `GLM` for 4x4 Matrix transformations ($MVP = P \times V \times M$).
* **Windowing:** `GLFW3` with a custom event-callback for mouse input.
* **Loader:** Custom Python-side GLB parser (bypassing `p3assimp`).

---

## üèÅ Milestone Conclusion
V3.0 proves that we can control the render pipeline at the metal level. By writing our own renderer, we have successfully "unlocked" the ability to implement **Morph Targets (Blendshapes)** in the next version without a third-party library deleting our data.

---

‚¨ÖÔ∏è [Back to Snapshots Menu](./README.md)